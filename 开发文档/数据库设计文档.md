# 📊 博客系统数据库设计文档

> Version: 1.0.0  
> Last Updated: 2024-09-24  
> Database: MySQL 8.0+

## 🎯 设计原则

### 1. 数据完整性
- **主键约束**: 每张表都有自增主键ID
- **外键约束**: 关联表使用外键维护数据一致性
- **唯一约束**: 防止重复数据（用户名、邮箱、标签名等）
- **非空约束**: 核心字段设置NOT NULL

### 2. 性能优化
- **索引策略**: 为查询频繁的字段建立合适索引
- **分页支持**: 支持大数据量的分页查询
- **统计字段**: 使用冗余字段和触发器维护统计数据
- **全文搜索**: 为文章标题和内容建立全文索引

### 3. 扩展性设计
- **逻辑删除**: 使用deleted字段标记，保留数据完整性
- **状态管理**: 多种状态支持业务流程控制
- **字段预留**: 为未来功能扩展预留字段
- **配置化**: 系统配置表支持动态配置

### 4. 安全性考虑
- **密码加密**: 用户密码使用BCrypt加密存储
- **IP记录**: 记录用户操作IP用于安全监控
- **权限分级**: 用户角色和权限分离设计
- **数据脱敏**: 敏感信息字段设计考虑脱敏需求

---

## 📋 表结构总览

### 核心表结构（9张表）

| 序号 | 表名 | 用途 | 记录数预估 | 重要程度 |
|------|------|------|-----------|----------|
| 1 | users | 用户基础信息 | 10K - 100K | ⭐⭐⭐⭐⭐ |
| 2 | categories | 文章分类 | 10 - 50 | ⭐⭐⭐⭐ |
| 3 | tags | 文章标签 | 50 - 200 | ⭐⭐⭐⭐ |
| 4 | articles | 文章主表 | 1K - 50K | ⭐⭐⭐⭐⭐ |
| 5 | article_tags | 文章标签关联 | 5K - 200K | ⭐⭐⭐ |
| 6 | comments | 文章评论 | 10K - 500K | ⭐⭐⭐⭐ |
| 7 | article_likes | 文章点赞记录 | 50K - 1M | ⭐⭐⭐ |
| 8 | article_collections | 文章收藏记录 | 10K - 200K | ⭐⭐⭐ |
| 9 | system_configs | 系统配置 | 20 - 100 | ⭐⭐ |

### 扩展表结构（1张表）

| 序号 | 表名 | 用途 | 记录数预估 | 重要程度 |
|------|------|------|-----------|----------|
| 10 | comment_likes | 评论点赞记录 | 10K - 100K | ⭐⭐ |

---

## 🗂️ 详细表结构设计

### 1. 用户管理模块

#### 👤 users（用户基础信息表）

**表设计思路**: 存储用户账户、个人资料和权限信息，支持多角色和用户状态管理。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 用户唯一标识符，自增主键 |
| username | VARCHAR | 50 | - | UK | 用户登录名，全局唯一，3-50字符 |
| password | VARCHAR | 255 | - | - | BCrypt加密密码，原始密码6-20字符 |
| email | VARCHAR | 100 | - | UK | 用户邮箱地址，全局唯一，用于通知 |
| phone | VARCHAR | 20 | NULL | - | 手机号码，格式：+86-138****8888 |
| nickname | VARCHAR | 50 | NULL | - | 用户昵称，前台显示，2-50字符 |
| avatar | VARCHAR | 500 | NULL | - | 用户头像URL，支持相对路径和绝对URL |
| bio | TEXT | - | NULL | - | 个人简介，最大1000字符，支持Markdown |
| role | VARCHAR | 20 | 'USER' | IDX | 角色：ADMIN-管理员，USER-普通用户，AUTHOR-作者 |
| status | INT | - | 1 | IDX | 状态：0-禁用，1-正常，2-待激活 |
| article_count | INT | - | 0 | - | 发表文章总数，冗余字段快速查询 |
| follower_count | INT | - | 0 | - | 粉丝数量，用于影响力统计 |
| following_count | INT | - | 0 | - | 关注数量，用于社交功能 |
| last_login_time | DATETIME | - | NULL | - | 最后登录时间，统计活跃度 |
| last_login_ip | VARCHAR | 50 | NULL | - | 最后登录IP，用于安全监控 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | IDX | 账户创建时间，不可修改 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 最后更新时间，自动维护 |
| deleted | TINYINT(1) | - | 0 | - | 逻辑删除：0-未删除，1-已删除 |

**索引设计**:
- `idx_username`: 用户名索引，用于登录查询
- `idx_email`: 邮箱索引，用于邮箱登录和找回密码
- `idx_status_role`: 状态角色复合索引，管理员查询
- `idx_create_time`: 创建时间索引，注册统计

**业务规则**:
- 用户名支持3-50字符，字母数字下划线
- 邮箱必须符合标准邮箱格式
- 密码原始长度6-20字符，存储时BCrypt加密
- 默认角色为USER，管理员手动设置ADMIN
- 逻辑删除保留用户历史数据

---

### 2. 内容分类模块

#### 📂 categories（文章分类表）

**表设计思路**: 支持多级分类和自定义显示样式，用于文章内容组织。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 分类唯一标识符，自增主键 |
| name | VARCHAR | 50 | - | - | 分类名称，2-50字符，如：后端开发 |
| slug | VARCHAR | 100 | NULL | UK | URL别名，如：backend-dev |
| description | TEXT | - | NULL | - | 分类描述，最大500字符，用于SEO |
| parent_id | BIGINT | - | 0 | IDX | 父分类ID，0表示顶级分类 |
| level | TINYINT | - | 1 | - | 分类层级：1/2/3级分类 |
| path | VARCHAR | 200 | NULL | - | 分类路径：1/2/3，便于查询子分类 |
| icon | VARCHAR | 100 | NULL | - | 分类图标，FontAwesome图标名或URL |
| color | VARCHAR | 20 | NULL | - | 主题色，16进制颜色值，如：#1890ff |
| cover_image | VARCHAR | 500 | NULL | - | 分类封面图URL，用于页面展示 |
| sort_order | INT | - | 0 | IDX | 排序权重，数值越大越靠前 |
| article_count | INT | - | 0 | - | 分类文章数量，冗余字段快速查询 |
| status | TINYINT(1) | - | 1 | IDX | 分类状态：0-禁用，1-启用 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 分类创建时间 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 最后更新时间 |
| deleted | TINYINT(1) | - | 0 | - | 逻辑删除：0-未删除，1-已删除 |

**索引设计**:
- `idx_parent_id`: 父分类索引，查询子分类
- `idx_slug`: 别名索引，用于URL路由
- `idx_sort_order`: 排序索引
- `idx_status`: 状态索引，前台查询

**业务规则**:
- 支持最多3级嵌套分类
- slug用于SEO友好的URL
- parent_id=0表示顶级分类
- 删除分类时检查是否有文章关联

---

#### 🏷️ tags（文章标签表）

**表设计思路**: 用于文章内容标记和分类，支持热门标签统计。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 标签唯一标识符，自增主键 |
| name | VARCHAR | 50 | - | UK,IDX | 标签名称，全局唯一，1-50字符 |
| slug | VARCHAR | 100 | NULL | UK,IDX | URL别名，如：java、redis |
| description | TEXT | - | NULL | - | 标签描述，最大200字符 |
| color | VARCHAR | 20 | NULL | - | 标签颜色，16进制值，如：#f50 |
| background_color | VARCHAR | 20 | NULL | - | 标签背景色，特殊显示效果 |
| use_count | INT | - | 0 | IDX | 使用次数，关联文章时+1 |
| click_count | INT | - | 0 | - | 点击次数，热门标签统计 |
| status | TINYINT(1) | - | 1 | IDX | 标签状态：0-禁用，1-启用 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 标签创建时间 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 最后更新时间 |
| deleted | TINYINT(1) | - | 0 | - | 逻辑删除：0-未删除，1-已删除 |

**索引设计**:
- `idx_name`: 标签名称索引
- `idx_slug`: 标签别名索引
- `idx_use_count`: 使用次数索引，热门标签查询
- `idx_status`: 状态索引

**业务规则**:
- 标签名称全局唯一
- use_count通过触发器自动维护
- 支持颜色自定义，提升用户体验
- 可按使用次数查询热门标签

---

### 3. 文章内容模块

#### 📖 articles（文章主表）

**表设计思路**: 存储博客文章的所有基础信息和内容，支持多种状态和属性。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 文章唯一标识符，自增主键 |
| title | VARCHAR | 200 | - | FULLTEXT | 文章标题，5-200字符，用于显示和SEO |
| slug | VARCHAR | 300 | NULL | UK,IDX | URL别名，如：spring-boot-guide |
| content | LONGTEXT | - | NULL | FULLTEXT | 正文内容，Markdown格式，最大16MB |
| summary | TEXT | - | NULL | FULLTEXT | 文章摘要，最大500字符 |
| cover_image | VARCHAR | 500 | NULL | - | 封面图URL，支持相对路径和绝对URL |
| author_id | BIGINT | - | - | IDX,FK | 作者ID，关联users表 |
| category_id | BIGINT | - | NULL | IDX,FK | 分类ID，关联categories表 |
| status | TINYINT | - | 0 | IDX | 状态：0-草稿，1-已发布，2-已下架，3-待审核 |
| is_top | TINYINT(1) | - | 0 | IDX | 是否置顶：0-普通，1-置顶 |
| is_featured | TINYINT(1) | - | 0 | IDX | 是否精选：0-普通，1-精选 |
| allow_comment | TINYINT(1) | - | 1 | - | 是否允许评论：0-禁止，1-允许 |
| view_count | BIGINT | - | 0 | IDX | 浏览次数，访问详情页+1 |
| like_count | BIGINT | - | 0 | IDX | 点赞数量，与article_likes表同步 |
| comment_count | BIGINT | - | 0 | IDX | 评论数量，与comments表同步 |
| collect_count | BIGINT | - | 0 | - | 收藏数量，与article_collections表同步 |
| share_count | BIGINT | - | 0 | - | 分享次数，社交分享数据 |
| article_type | TINYINT | - | 1 | - | 文章类型：1-原创，2-转载，3-翻译 |
| original_url | VARCHAR | 500 | NULL | - | 原文链接，转载/翻译文章源地址 |
| read_time | INT | - | NULL | - | 预计阅读时间(分钟)，根据字数计算 |
| word_count | INT | - | NULL | - | 文章字数，不含Markdown语法字符 |
| keywords | VARCHAR | 500 | NULL | - | SEO关键词，逗号分隔，最多10个 |
| meta_description | TEXT | - | NULL | - | SEO描述，最大160字符 |
| publish_time | DATETIME | - | NULL | IDX | 发布时间，支持定时发布 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 创建时间，草稿创建时间 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 最后编辑时间 |
| deleted | TINYINT(1) | - | 0 | - | 逻辑删除：0-未删除，1-已删除 |

**索引设计**:
- `idx_author_id`: 作者索引，查询用户文章
- `idx_category_id`: 分类索引，分类页面
- `idx_status`: 状态索引，前台查询已发布文章
- `idx_publish_time`: 发布时间索引，文章列表排序
- `idx_is_top_featured`: 置顶精选复合索引
- `idx_view_count`: 浏览量索引，热门文章排序
- `idx_slug`: URL别名索引，URL路由
- `idx_fulltext_search`: 全文搜索索引(title, content, summary)
- `idx_articles_hot_score`: 热门度复合索引

**业务规则**:
- 文章标题必填，5-200字符限制
- 支持Markdown格式内容编写
- summary为空时自动从content提取
- 统计字段通过触发器自动维护
- 支持定时发布功能（publish_time）

---

### 4. 关联关系模块

#### 🔗 article_tags（文章标签关联表）

**表设计思路**: 维护文章与标签的多对多关系，支持一篇文章关联多个标签。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 关联关系唯一标识符，自增主键 |
| article_id | BIGINT | - | - | IDX,FK | 文章ID，关联articles表主键 |
| tag_id | BIGINT | - | - | IDX,FK | 标签ID，关联tags表主键 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 关联创建时间，统计标签使用趋势 |

**约束设计**:
- `uk_article_tag`: 文章标签唯一约束，防止重复关联
- `FK article_id → articles(id)`: 外键约束，级联删除
- `FK tag_id → tags(id)`: 外键约束，级联删除

**索引设计**:
- `idx_article_id`: 文章ID索引，查询文章所有标签
- `idx_tag_id`: 标签ID索引，查询标签下所有文章

**业务规则**:
- 一篇文章可以关联多个标签
- 删除文章或标签时自动删除关联关系
- 建议每篇文章关联3-8个标签

---

### 5. 评论互动模块

#### 💬 comments（文章评论表）

**表设计思路**: 支持多级评论回复和状态管理，记录用户信息快照。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 评论唯一标识符，自增主键 |
| article_id | BIGINT | - | - | IDX,FK | 文章ID，关联articles表 |
| user_id | BIGINT | - | - | IDX,FK | 评论用户ID，关联users表 |
| parent_id | BIGINT | - | 0 | IDX | 父评论ID，0表示顶级评论 |
| content | TEXT | - | - | - | 评论内容，1-500字符，支持表情 |
| user_name | VARCHAR | 50 | NULL | - | 评论时用户昵称快照 |
| user_avatar | VARCHAR | 500 | NULL | - | 评论时用户头像快照 |
| user_email | VARCHAR | 100 | NULL | - | 评论时用户邮箱快照（Gravatar） |
| ip_address | VARCHAR | 50 | NULL | - | 评论者IP地址，反垃圾和安全控制 |
| user_agent | TEXT | - | NULL | - | 用户浏览器信息，技术统计 |
| like_count | INT | - | 0 | - | 评论点赞数，与comment_likes表同步 |
| reply_count | INT | - | 0 | - | 回复数量，子评论统计 |
| status | TINYINT | - | 1 | IDX | 状态：0-待审核，1-已发布，2-已隐藏，3-垃圾评论 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | IDX | 评论发表时间 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 评论最后修改时间 |
| deleted | TINYINT(1) | - | 0 | - | 逻辑删除：0-未删除，1-已删除 |

**索引设计**:
- `idx_article_id`: 文章ID索引，查询文章所有评论
- `idx_user_id`: 用户ID索引，查询用户所有评论
- `idx_parent_id`: 父评论索引，查询回复评论
- `idx_status_time`: 状态时间复合索引，前台评论展示
- `idx_comments_article_status`: 文章状态复合索引

**业务规则**:
- 支持无限级评论回复
- 用户信息快照防止用户修改信息影响历史评论
- IP记录用于反垃圾评论
- 支持评论审核机制

---

### 6. 用户行为记录模块

#### ❤️ article_likes（文章点赞记录表）

**表设计思路**: 记录用户对文章的点赞行为，防重复点赞，支持点赞趋势分析。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 点赞记录唯一标识符，自增主键 |
| article_id | BIGINT | - | - | IDX,FK | 文章ID，关联articles表 |
| user_id | BIGINT | - | - | IDX,FK | 点赞用户ID，关联users表 |
| ip_address | VARCHAR | 50 | NULL | - | 点赞时IP地址，防刷控制 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | IDX | 点赞时间，统计和排序 |

**约束设计**:
- `uk_article_user_like`: 文章用户点赞唯一约束，防重复点赞
- `FK article_id → articles(id)`: 外键约束，级联删除
- `FK user_id → users(id)`: 外键约束，级联删除

**索引设计**:
- `idx_article_id`: 文章ID索引，统计文章点赞数
- `idx_user_id`: 用户ID索引，查询用户点赞记录
- `idx_create_time`: 时间索引，点赞趋势统计

**业务规则**:
- 同一用户对同一文章只能点赞一次
- 取消点赞删除记录
- 通过触发器自动更新articles表的like_count

---

#### 📚 article_collections（文章收藏记录表）

**表设计思路**: 记录用户对文章的收藏行为，支持收藏夹分类和个人笔记。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 收藏记录唯一标识符，自增主键 |
| article_id | BIGINT | - | - | IDX,FK | 文章ID，关联articles表 |
| user_id | BIGINT | - | - | IDX,FK | 收藏用户ID，关联users表 |
| folder_name | VARCHAR | 100 | 'default' | IDX | 收藏夹名称，支持自定义分类 |
| notes | TEXT | - | NULL | - | 收藏备注，用户个人笔记 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | IDX | 收藏时间 |

**约束设计**:
- `uk_article_user_collect`: 文章用户收藏唯一约束，防重复收藏
- `FK article_id → articles(id)`: 外键约束，级联删除
- `FK user_id → users(id)`: 外键约束，级联删除

**索引设计**:
- `idx_article_id`: 文章ID索引，统计文章收藏数
- `idx_user_id`: 用户ID索引，查询用户收藏记录
- `idx_folder_name`: 收藏夹名称索引
- `idx_create_time`: 时间索引，收藏列表排序

**业务规则**:
- 同一用户对同一文章只能收藏一次
- 支持收藏夹分类管理
- 支持收藏笔记功能
- 取消收藏删除记录

---

#### 👍 comment_likes（评论点赞记录表）

**表设计思路**: 记录用户对评论的点赞行为，增强评论互动性。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 评论点赞记录唯一标识符，自增主键 |
| comment_id | BIGINT | - | - | IDX,FK | 评论ID，关联comments表 |
| user_id | BIGINT | - | - | IDX,FK | 点赞用户ID，关联users表 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 点赞时间 |

**约束设计**:
- `uk_comment_user_like`: 评论用户点赞唯一约束，防重复点赞
- `FK comment_id → comments(id)`: 外键约束，级联删除
- `FK user_id → users(id)`: 外键约束，级联删除

**索引设计**:
- `idx_comment_id`: 评论ID索引，统计评论点赞数
- `idx_user_id`: 用户ID索引，查询用户点赞记录

**业务规则**:
- 同一用户对同一评论只能点赞一次
- 通过触发器自动更新comments表的like_count
- 取消点赞删除记录

---

### 7. 系统配置模块

#### ⚙️ system_configs（系统配置表）

**表设计思路**: 存储博客系统的各种配置参数，支持动态配置和分组管理。

| 字段名 | 类型 | 长度 | 默认值 | 索引 | 注释说明 |
|--------|------|------|--------|------|----------|
| id | BIGINT | - | AUTO_INCREMENT | PK | 配置项唯一标识符，自增主键 |
| config_key | VARCHAR | 100 | - | UK,IDX | 配置键名，如：site_title、smtp_host |
| config_value | TEXT | - | NULL | - | 配置值，支持字符串、JSON复杂配置 |
| config_type | VARCHAR | 20 | 'string' | - | 类型：string-字符串，number-数字，boolean-布尔，json-JSON对象 |
| config_group | VARCHAR | 50 | NULL | IDX | 配置分组：基础设置、邮件配置、SEO设置 |
| description | VARCHAR | 500 | NULL | - | 配置项描述，说明作用和格式要求 |
| is_public | TINYINT(1) | - | 0 | IDX | 是否公开：0-仅管理员可见，1-前台可访问 |
| status | TINYINT(1) | - | 1 | - | 配置状态：0-禁用，1-启用 |
| create_time | DATETIME | - | CURRENT_TIMESTAMP | - | 配置创建时间 |
| update_time | DATETIME | - | ON UPDATE CURRENT_TIMESTAMP | - | 配置最后修改时间 |

**索引设计**:
- `idx_config_key`: 配置键索引
- `idx_config_group`: 配置分组索引
- `idx_is_public`: 公开状态索引

**业务规则**:
- config_key全局唯一
- 支持多种数据类型配置
- is_public控制前台访问权限
- 配置修改后实时生效

---

## 🔗 表关系设计

### 主要关联关系

```
users (1) ←→ (N) articles
users (1) ←→ (N) comments
users (1) ←→ (N) article_likes
users (1) ←→ (N) article_collections

categories (1) ←→ (N) articles

articles (N) ←→ (N) tags (通过 article_tags)
articles (1) ←→ (N) comments
articles (1) ←→ (N) article_likes
articles (1) ←→ (N) article_collections

comments (1) ←→ (N) comment_likes
comments (1) ←→ (N) comments (自关联，支持回复)
```

### 外键约束策略

- **CASCADE DELETE**: 删除主记录时自动删除相关记录
- **CASCADE UPDATE**: 更新主记录ID时自动更新相关记录
- **适用场景**: 用户删除、文章删除、评论删除等

---

## 📊 性能优化策略

### 1. 索引优化

#### 单列索引
- 主键索引：所有表的id字段
- 唯一索引：username、email、slug等
- 普通索引：外键字段、状态字段、时间字段

#### 复合索引
- `idx_status_role` (users): 管理员按状态和角色查询
- `idx_is_top_featured` (articles): 置顶和精选文章查询
- `idx_status_time` (comments): 评论按状态和时间排序

#### 全文索引
- `idx_fulltext_search` (articles): 支持标题和内容全文搜索
- 支持中英文搜索，提升用户搜索体验

### 2. 数据冗余策略

#### 统计字段冗余
- `article_count` (users): 用户文章数量
- `article_count` (categories): 分类文章数量
- `use_count` (tags): 标签使用次数
- `like_count`, `comment_count`, `collect_count` (articles): 文章统计数据

#### 快照字段冗余
- `user_name`, `user_avatar`, `user_email` (comments): 评论用户信息快照
- 防止用户信息修改影响历史评论显示

### 3. 自动化维护

#### 触发器设计
- **文章点赞统计触发器**: 自动维护articles表的like_count
- **文章收藏统计触发器**: 自动维护articles表的collect_count
- **评论统计触发器**: 自动维护articles表的comment_count

#### 存储过程
- `sp_get_article_detail`: 获取文章详情并自动增加浏览量
- 减少应用层代码复杂度，提升性能

### 4. 查询优化

#### 视图设计
- `v_hot_articles`: 热门文章视图，预计算热门度分数
- `v_user_article_stats`: 用户文章统计视图，聚合用户数据

#### 分页优化
- 使用LIMIT和OFFSET进行分页
- 大数据量时考虑使用游标分页
- 索引覆盖查询减少回表操作

---

## 🛡️ 数据安全设计

### 1. 密码安全
- 使用BCrypt算法加密用户密码
- 密码不可逆，重置而非恢复
- 密码强度要求：6-20字符，包含字母数字

### 2. 访问控制
- 基于角色的访问控制（RBAC）
- 用户状态管理（正常、禁用、待激活）
- 逻辑删除保护数据完整性

### 3. 审计日志
- IP地址记录（登录、评论、点赞）
- 操作时间戳（创建、更新、删除）
- 用户信息快照（历史数据保护）

### 4. 数据校验
- 字段长度限制防止缓冲区溢出
- 外键约束保证数据一致性
- 唯一约束防止重复数据

---

## 📈 扩展性设计

### 1. 水平扩展准备
- 使用BIGINT主键支持大数据量
- 考虑分表策略（按时间、按用户）
- 预留分片键字段

### 2. 功能扩展预留
- 用户表预留社交字段（follower_count, following_count）
- 文章表预留SEO字段（keywords, meta_description）
- 系统配置表支持JSON格式复杂配置

### 3. 性能扩展
- 读写分离支持
- 缓存层集成准备
- CDN静态资源分离

---

## 📋 使用建议

### 1. 开发阶段
- 严格按照字段约束开发
- 利用外键约束保证数据一致性
- 充分利用索引提升查询性能

### 2. 测试阶段
- 使用提供的测试数据进行功能测试
- 进行大数据量性能测试
- 验证触发器和存储过程正确性

### 3. 生产部署
- 定期备份数据库
- 监控慢查询日志
- 根据业务增长调整索引和配置

### 4. 运维维护
- 定期更新统计信息
- 监控表空间使用情况
- 定期清理逻辑删除数据

---

## 🔄 版本更新记录

| 版本 | 日期 | 变更内容 | 影响范围 |
|------|------|----------|----------|
| v1.0.0 | 2024-09-24 | 初始版本，完整数据库设计 | 全部 |
| - | - | 删除面试题相关表 | 减少5张表 |
| - | - | 优化字段注释和索引 | 所有表 |
| - | - | 添加触发器和存储过程 | 性能优化 |

---

**📝 注意**: 
- 执行SQL脚本前请备份数据库
- 建议在开发环境充分测试后再部署生产环境
- 如有字段调整需求，请评估对现有数据的影响
